{% assign puddings = 0 %}
{% assign toppings = 0 %}

<div class="cart">
	<h1 class="subtitle">Your cart</h1>

	{% if cart.item_count > 0 %}

		<table class="cart-table">

			<thead class="cart-table-headline">
				<tr>
					<th class="cart-table-quanity">Qty</th>
					<th class="cart-table-title">&nbsp;</th>
					<th class="cart-table-price">Price</th>
					<th class="cart-table-total">Total</th>
					<th class="cart-table-remove"></th>
				</tr>
			</thead>

			<tbody>

				{% for item in cart.items %}
					{% if item.product.type == 'Topping' %}
						{% assign toppings = toppings | plus: 1 %}
					{% else if item.product.type == 'Pudding' %}
						{% assign puddings = puddings | plus: 1 %}
					{% endif %}

					{% assign collection_url = '/collections/all' %}
					{% assign continue_shopping_url = collection_url %}

					<tr class="cart-table-body">
						<td class="cart-table-quantity">
							<span class="quantity">{{ item.quantity }} x</span>
						</td>
						<td class="cart-table-title">
							<a href="{{ collection_url }}{{ item.url }}">
								{{ item.title }} <small>({{ item.product.type }})</small>
							</a>

							{% comment %}
								Line Item Properties
							{% endcomment %}
							{% assign properties_amount = item.properties | size %}
							{% if properties_amount > 0 %}
								<p>
									{% for p in item.properties %}
										{% unless p.last == blank %}
											{{ p.first }}:
											{% if p.last contains '/uploads/' %}
												<a href="{{ p.last }}">{{ p.last | split: '/' | last }}</a>
											{% else %}
												{{ p.last }}
											{% endif %}
											<br>
										{% endunless %}
									{% endfor %}
								</p>
							{% endif %}
						</td>
						<td class="cart-table-price">{{ item.price | money }}</td>
						<td class="cart-table-total">
							{{ item.line_price | money }}
						</td>
						<td class="cart-table-remove">
							<a class="cart-table-remove-btn" href="/cart/change?line={{ forloop.index }}&amp;quantity=0">&times;</a>
						</td>
					</tr>
				{% endfor %}

				<tr class="cart-table-total">
					<td>
						<strong class="cart-table-subtotal">Total {{ cart.total_price | money }}</strong>
					</td>
				</tr>

			</tbody>

		</table>

		{% if puddings == 0 and toppings > 0 %}
			<p>
				IF YOU WISH TO ODER ONLY TOPPINGS WITHOUT RICE PUDDING, PLEASE CALL OUR STORE AT <a href="tel:2122740008"><strong>212.274.0008</strong></a> BETWEEN
				<strong>9:00AM AND 5:00PM MONDAY THROUGH FRIDAY</strong> AND OUR STAFF WILL BE HAPPY TO TAKE YOUR ORDER.
			</p>
			<p>
				PLEASE NOTE, HOWEVER, THAT THESE SPECIAL ORDERS WILL HAVE A SUPPLEMENTAL SHIPPING CHARGE ADDED TO THE $15.00 CHARGE FOR EACH TOPPING.
			</p>
		{% else %}
			<div class="cart-bottom">
				<input class="cart-tac" id="cart-tac" type="checkbox">
				<label class="cart-tac-label" for="cart-tac">I accept the <a href="/pages/tac">terms and conditions</a></label>
				<div class="cart-btn-wrapper">
					<a class="cart-btn btn" href="/checkout">Continue</a>
				</div>
			</div>
		{% endif %}
	{% else %}

		<div>
			<h2>It appears that your cart is currently empty!</h2>
			<h3>You can continue browsing <a href="/pages/ordernow">here</a>.</h3>
		</div>

	{% endif %}
</div>